name: Test

env:
  DAGGER_VERSION: 0.19.11

on:
  - pull_request
  - push

jobs:
  install-and-test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Test
        uses: dagger/dagger-for-github@v8.2.0
        with:
          version: ${{ env.DAGGER_VERSION }}
          verb: call
          module: ./dagger/test-and-build
          args: run
